# Vocab Master - äº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆPRDï¼‰

> ğŸ“š **æ–‡æ¡£ä½¿ç”¨æŒ‡å—**ï¼šè¯·å…ˆé˜…è¯» [å…¨å±€æ–‡æ¡£ä½“ç³»ä½¿ç”¨æŒ‡å—](/DOCUMENTATION_GUIDE.md) äº†è§£æ–‡æ¡£æ¶æ„

> **é¡¹ç›®åç§°**ï¼šVocab Master - æ™ºèƒ½è‹±è¯­å•è¯å­¦ä¹ å¹³å°  
> **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
> **æœ€åæ›´æ–°**ï¼š2025-01-15  
> **æ–‡æ¡£ç±»å‹**ï¼šå®Œæ•´ç‰ˆäº§å“éœ€æ±‚æ–‡æ¡£

---

## ğŸ“‹ ç›®å½•

- [ä¸€ã€äº§å“æ¦‚è¿°](#ä¸€äº§å“æ¦‚è¿°)
- [äºŒã€ç”¨æˆ·ç”»åƒä¸ä½¿ç”¨åœºæ™¯](#äºŒç”¨æˆ·ç”»åƒä¸ä½¿ç”¨åœºæ™¯)
- [ä¸‰ã€åŠŸèƒ½æ¨¡å—è¯¦è§£](#ä¸‰åŠŸèƒ½æ¨¡å—è¯¦è§£)
  - [3.1 ç”¨æˆ·è®¤è¯æ¨¡å—](#31-ç”¨æˆ·è®¤è¯æ¨¡å—)
  - [3.2 è¯æ±‡ç­‰çº§é€‰æ‹©æ¨¡å—](#32-è¯æ±‡ç­‰çº§é€‰æ‹©æ¨¡å—)
  - [3.3 æ–‡ç« åˆ†ææ¨¡å—ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰](#33-æ–‡ç« åˆ†ææ¨¡å—æ ¸å¿ƒåŠŸèƒ½)
  - [3.4 å•è¯å¤ä¹ æ¨¡å—](#34-å•è¯å¤ä¹ æ¨¡å—)
  - [3.5 ç”¨æˆ·å·²è®¤çŸ¥è¯æ±‡ç®¡ç†](#35-ç”¨æˆ·å·²è®¤çŸ¥è¯æ±‡ç®¡ç†)
  - [3.6 é…é¢ç®¡ç†æ¨¡å—](#36-é…é¢ç®¡ç†æ¨¡å—)
  - [3.7 å­¦ä¹ ç»Ÿè®¡æ¨¡å—](#37-å­¦ä¹ ç»Ÿè®¡æ¨¡å—)
  - [3.8 ç”¨æˆ·ä¸­å¿ƒ](#38-ç”¨æˆ·ä¸­å¿ƒ)
- [å››ã€æ•°æ®æ¨¡å‹](#å››æ•°æ®æ¨¡å‹)
- [äº”ã€æŠ€æœ¯æ¶æ„](#äº”æŠ€æœ¯æ¶æ„)
- [å…­ã€æ€§èƒ½æŒ‡æ ‡](#å…­æ€§èƒ½æŒ‡æ ‡)
- [ä¸ƒã€åç»­è¿­ä»£è®¡åˆ’](#ä¸ƒåç»­è¿­ä»£è®¡åˆ’)

---

## ä¸€ã€äº§å“æ¦‚è¿°

### 1.1 äº§å“å®šä½

**Vocab Master** æ˜¯ä¸€æ¬¾åŸºäº **AI + é—´éš”é‡å¤ç®—æ³•** çš„æ™ºèƒ½è‹±è¯­å•è¯å­¦ä¹ å¹³å°ï¼Œé€šè¿‡åˆ†æç”¨æˆ·ä¸Šä¼ çš„è‹±æ–‡æ–‡ç« ï¼Œè‡ªåŠ¨è¯†åˆ«é™Œç”Ÿè¯æ±‡å¹¶ç”Ÿæˆä¸Šä¸‹æ–‡ç›¸å…³çš„è§£é‡Šï¼Œå¸®åŠ©ç”¨æˆ·é«˜æ•ˆå­¦ä¹ å’Œå¤ä¹ è‹±è¯­å•è¯ã€‚

### 1.2 æ ¸å¿ƒä»·å€¼ä¸»å¼ 

| æ ¸å¿ƒç‰¹æ€§     | ä¼ ç»Ÿæ–¹å¼         | Vocab Master                |
| ------------ | ---------------- | --------------------------- |
| **è¯æ±‡æ¥æº** | æ­»è®°ç¡¬èƒŒè¯æ±‡ä¹¦   | çœŸå®é˜…è¯»ææ–™ï¼ˆæ–‡ç« ã€è®ºæ–‡ï¼‰  |
| **å«ä¹‰ç†è§£** | è¯å…¸å¼å¤šä¹‰é¡¹ç½—åˆ— | ä¸Šä¸‹æ–‡ç›¸å…³çš„ AI è§£é‡Š        |
| **å¤ä¹ ç­–ç•¥** | æ— è§„åˆ’/éšæœºå¤ä¹   | Anki SM-2 ç§‘å­¦é—´éš”å¤ä¹       |
| **ä¸ªæ€§åŒ–**   | ç»Ÿä¸€è¯æ±‡è¡¨       | 7 çº§è¯æ±‡åº“ + ç”¨æˆ·å·²è®¤çŸ¥è¯æ±‡ |
| **å­¦ä¹ æ•ˆç‡** | ä½æ•ˆé‡å¤å­¦ä¹      | AI æ™ºèƒ½åˆ¤æ–­å·²æŒæ¡å«ä¹‰       |

### 1.3 æ ¸å¿ƒåŠŸèƒ½æµç¨‹

```
ç”¨æˆ·ä¸Šä¼ æ–‡ç« 
  â†“
ç³»ç»Ÿè¯†åˆ«é™Œç”Ÿè¯æ±‡ï¼ˆåŸºäºç”¨æˆ·ç­‰çº§ + å·²è®¤çŸ¥è¯æ±‡ï¼‰
  â†“
AI ç”Ÿæˆä¸Šä¸‹æ–‡è§£é‡Šï¼ˆåˆ¤æ–­æ˜¯å¦å·²æŒæ¡ï¼‰
  â†“
ç”¨æˆ·ç¡®è®¤å¹¶ä¿å­˜ï¼ˆnew/extend ç±»å‹ï¼‰
  â†“
Anki ç®—æ³•å®‰æ’å¤ä¹ è®¡åˆ’
  â†“
é—´éš”å¤ä¹ ï¼Œå·©å›ºè®°å¿†
```

---

## äºŒã€ç”¨æˆ·ç”»åƒä¸ä½¿ç”¨åœºæ™¯

### 2.1 ç›®æ ‡ç”¨æˆ·

1. **è‹±è¯­å­¦ä¹ è€…**ï¼ˆå¤§å­¦ç”Ÿã€è€ƒç ”/è€ƒå…¬å¤‡è€ƒï¼‰

   - éœ€è¦å¿«é€Ÿæ‰©å……è¯æ±‡é‡
   - éœ€è¦é€šè¿‡çœŸå®ææ–™å­¦ä¹ å•è¯

2. **ä¸“ä¸šäººå£«**ï¼ˆæŠ€æœ¯å¼€å‘è€…ã€å­¦æœ¯ç ”ç©¶è€…ï¼‰

   - éœ€è¦é˜…è¯»è‹±æ–‡æŠ€æœ¯æ–‡æ¡£/è®ºæ–‡
   - éœ€è¦ç§¯ç´¯é¢†åŸŸä¸“ä¸šè¯æ±‡

3. **è‹±è¯­çˆ±å¥½è€…**ï¼ˆé˜…è¯»çˆ±å¥½è€…ã€ç»ˆèº«å­¦ä¹ è€…ï¼‰
   - å–œæ¬¢é˜…è¯»è‹±æ–‡åŸç‰ˆä¹¦/æ–‡ç« 
   - å¸Œæœ›ç³»ç»ŸåŒ–ç®¡ç†å•è¯å­¦ä¹ 

### 2.2 å…¸å‹ä½¿ç”¨åœºæ™¯

**åœºæ™¯ 1ï¼šå¤§å­¦ç”Ÿå¤‡è€ƒå››å…­çº§**

> å°ææ˜¯ä¸€åå¤§äºŒå­¦ç”Ÿï¼Œå‡†å¤‡è€ƒè‹±è¯­å…­çº§ã€‚ä»–å°†å†å¹´å…­çº§çœŸé¢˜é˜…è¯»ç†è§£æ–‡ç« å¤åˆ¶åˆ° Vocab Masterï¼Œç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å‡ºä»–ä¸è®¤è¯†çš„è¯æ±‡ï¼ˆè¿‡æ»¤æ‰å››çº§è¯æ±‡ï¼‰ï¼Œå¹¶ç”Ÿæˆä¸Šä¸‹æ–‡è§£é‡Šã€‚å°ææ¯å¤©èŠ± 15 åˆ†é’Ÿå¤ä¹ ï¼Œ3 ä¸ªæœˆåé€šè¿‡äº†å…­çº§è€ƒè¯•ã€‚

**åœºæ™¯ 2ï¼šå¼€å‘è€…é˜…è¯»æŠ€æœ¯æ–‡æ¡£**

> å¼ å·¥æ˜¯ä¸€åå‰ç«¯å¼€å‘è€…ï¼Œç»å¸¸éœ€è¦é˜…è¯»è‹±æ–‡æŠ€æœ¯åšå®¢ã€‚ä»–å°†ä¸€ç¯‡å…³äº React æ–°ç‰¹æ€§çš„æ–‡ç« ä¸Šä¼ åˆ° Vocab Masterï¼Œç³»ç»Ÿè‡ªåŠ¨è¿‡æ»¤æ‰ä»–å·²ç»æ ‡è®°ä¸º"å·²è®¤è¯†"çš„æŠ€æœ¯æœ¯è¯­ï¼ˆå¦‚ "component", "props"ï¼‰ï¼Œåªä¿ç•™çœŸæ­£é™Œç”Ÿçš„è¯æ±‡ï¼Œå¸®åŠ©ä»–é«˜æ•ˆå­¦ä¹ ã€‚

**åœºæ™¯ 3ï¼šç ”ç©¶ç”Ÿé˜…è¯»è‹±æ–‡è®ºæ–‡**

> ç‹åŒå­¦æ˜¯ä¸€åè®¡ç®—æœºä¸“ä¸šç ”ç©¶ç”Ÿï¼Œéœ€è¦é˜…è¯»å¤§é‡è‹±æ–‡è®ºæ–‡ã€‚å¥¹ä½¿ç”¨ Vocab Master åˆ†æè®ºæ–‡ï¼Œç³»ç»Ÿä¸ä»…è¯†åˆ«å‡ºé™Œç”Ÿè¯æ±‡ï¼Œè¿˜èƒ½æ ¹æ®è®ºæ–‡ä¸Šä¸‹æ–‡ç”Ÿæˆä¸“ä¸šè§£é‡Šï¼Œå¸®åŠ©å¥¹å¿«é€Ÿç†è§£å­¦æœ¯è¯æ±‡ã€‚

---

## ä¸‰ã€åŠŸèƒ½æ¨¡å—è¯¦è§£

---

## 3.1 ç”¨æˆ·è®¤è¯æ¨¡å—

### åŠŸèƒ½æ¦‚è¿°

æ”¯æŒ **æ‰‹æœºå· + é‚®ç®±** åŒæ¨¡å¼æ³¨å†Œ/ç™»å½•ï¼ŒåŸºäº Better Auth å®ç°ï¼Œæä¾›å®‰å…¨å¯é çš„èº«ä»½è®¤è¯ã€‚

### åŠŸèƒ½ç»†èŠ‚

#### 3.1.1 æ³¨å†Œæ–¹å¼

**æ–¹å¼ä¸€ï¼šæ‰‹æœºå·æ³¨å†Œ**

- è¾“å…¥æ‰‹æœºå· + å¯†ç 
- å‘é€éªŒè¯ç ï¼ˆ6 ä½æ•°å­—ï¼‰
- éªŒè¯é€šè¿‡ååˆ›å»ºè´¦æˆ·

**æ–¹å¼äºŒï¼šé‚®ç®±æ³¨å†Œ**

- è¾“å…¥é‚®ç®± + å¯†ç 
- å‘é€éªŒè¯é‚®ä»¶
- ç‚¹å‡»é‚®ä»¶é“¾æ¥éªŒè¯

**æ–¹å¼ä¸‰ï¼šç¬¬ä¸‰æ–¹ç™»å½•**ï¼ˆé¢„ç•™æ¥å£ï¼Œæš‚æœªå¯ç”¨ï¼‰

- Google ç™»å½•
- GitHub ç™»å½•

#### 3.1.2 ç™»å½•æ–¹å¼

- æ‰‹æœºå· + å¯†ç 
- é‚®ç®± + å¯†ç 
- ç¬¬ä¸‰æ–¹è´¦å·ç™»å½•ï¼ˆé¢„ç•™ï¼‰

#### 3.1.3 å¯†ç å®‰å…¨

- å¯†ç è¦æ±‚ï¼šè‡³å°‘ 8 ä¸ªå­—ç¬¦
- åŠ å¯†æ–¹å¼ï¼šWeb Crypto API (PBKDF2-SHA256)
- ç›å€¼ï¼šéšæœºç”Ÿæˆï¼Œä¸å¯†ç å“ˆå¸Œä¸€èµ·å­˜å‚¨

#### 3.1.4 Session ç®¡ç†

- Session æœ‰æ•ˆæœŸï¼š30 å¤©
- è‡ªåŠ¨ç»­æœŸï¼šæ¯æ¬¡è¯·æ±‚æ›´æ–° Session
- è·¨è®¾å¤‡ç™»å½•ï¼šæ”¯æŒå¤šè®¾å¤‡åŒæ—¶ç™»å½•

### æ•°æ®æ¨¡å‹

```typescript
// users è¡¨
{
  id: number,
  name: string,
  email: string,
  emailVerified: boolean,
  phoneNumber: string,
  phoneNumberVerified: boolean,
  avatarUrl: string,
  role: string, // 'user' | 'admin'
  status: 'active' | 'suspended' | 'deleted',
  createdAt: Date,
  updatedAt: Date,
}

// sessions è¡¨
{
  id: number,
  userId: number,
  token: string,
  expiresAt: Date,
  ipAddress: string,
  userAgent: string,
}

// accounts è¡¨ï¼ˆBetter Authï¼‰
{
  id: number,
  userId: number,
  accountId: string,
  providerId: string, // 'credential' | 'google' | 'github'
  password: string, // å¯†ç è®¤è¯æ—¶ä½¿ç”¨
}
```

### API æ¥å£

| æ¥å£                               | æ–¹æ³• | è¯´æ˜                 |
| ---------------------------------- | ---- | -------------------- |
| `/api/auth/sign-up/phone`          | POST | æ‰‹æœºå·æ³¨å†Œ           |
| `/api/auth/sign-up/email`          | POST | é‚®ç®±æ³¨å†Œ             |
| `/api/auth/sign-in/phone`          | POST | æ‰‹æœºå·ç™»å½•           |
| `/api/auth/sign-in/email`          | POST | é‚®ç®±ç™»å½•             |
| `/api/auth/send-verification-code` | POST | å‘é€éªŒè¯ç            |
| `/api/auth/verify-email`           | GET  | éªŒè¯é‚®ç®±ï¼ˆé‚®ä»¶é“¾æ¥ï¼‰ |
| `/api/auth/session`                | GET  | è·å–å½“å‰ Session     |
| `/api/auth/sign-out`               | POST | ç™»å‡º                 |

---

## 3.2 è¯æ±‡ç­‰çº§é€‰æ‹©æ¨¡å—

### åŠŸèƒ½æ¦‚è¿°

ç”¨æˆ·é¦–æ¬¡ç™»å½•åï¼Œå¿…é¡»é€‰æ‹©è‡ªå·±çš„ **è¯æ±‡ç­‰çº§**ï¼Œç³»ç»Ÿæ ¹æ®ç­‰çº§è¿‡æ»¤æ–‡ç« ä¸­çš„å·²çŸ¥è¯æ±‡ï¼Œé¿å…é‡å¤å­¦ä¹ åŸºç¡€å•è¯ã€‚

### åŠŸèƒ½ç»†èŠ‚

#### 3.2.1 è¯æ±‡ç­‰çº§åˆ—è¡¨

| ç­‰çº§ ID          | ç­‰çº§åç§° | è¯æ±‡é‡        | é€‚ç”¨äººç¾¤           |
| ---------------- | -------- | ------------- | ------------------ |
| `primary_school` | å°å­¦è¯æ±‡ | çº¦ 800 è¯     | åŸºç¡€å…¥é—¨ã€å„¿ç«¥å­¦ä¹  |
| `middle_school`  | åˆä¸­è¯æ±‡ | çº¦ 1,600 è¯   | åˆä¸­æ¯•ä¸šæ°´å¹³       |
| `high_school`    | é«˜ä¸­è¯æ±‡ | çº¦ 3,500 è¯   | é«˜ä¸­æ¯•ä¸šæ°´å¹³       |
| `cet4`           | å¤§å­¦å››çº§ | çº¦ 4,500 è¯   | å¤§å­¦å››çº§æ°´å¹³       |
| `cet6`           | å¤§å­¦å…­çº§ | çº¦ 6,000 è¯   | å¤§å­¦å…­çº§æ°´å¹³       |
| `ielts_toefl`    | é›…æ€æ‰˜ç¦ | çº¦ 8,000+ è¯  | å‡ºå›½ç•™å­¦æ°´å¹³       |
| `gre`            | GRE      | çº¦ 12,000+ è¯ | ç ”ç©¶ç”Ÿå…¥å­¦è€ƒè¯•     |

#### 3.2.2 é€‰æ‹©æµç¨‹

```
ç”¨æˆ·é¦–æ¬¡ç™»å½•
  â†“
æ£€æµ‹ vocabularyLevel = null
  â†“
è‡ªåŠ¨é‡å®šå‘åˆ° /level é¡µé¢
  â†“
ç”¨æˆ·é€‰æ‹©è¯æ±‡ç­‰çº§
  â†“
ä¿å­˜åˆ° users.vocabularyLevel
  â†“
è‡ªåŠ¨é‡å®šå‘åˆ° /dashboard
```

#### 3.2.3 åç»­ä¿®æ”¹

- ç”¨æˆ·å¯åœ¨"ç”¨æˆ·ä¸­å¿ƒ"ä¿®æ”¹è¯æ±‡ç­‰çº§
- ä¿®æ”¹åç«‹å³ç”Ÿæ•ˆï¼ˆå½±å“åç»­æ–‡ç« åˆ†æï¼‰
- ä¸å½±å“å·²å­¦ä¹ çš„å•è¯

### æ•°æ®æ¨¡å‹

```typescript
// users è¡¨
{
  vocabularyLevel: 'primary_school' | 'middle_school' | 'high_school'
                 | 'cet4' | 'cet6' | 'ielts_toefl' | 'gre' | null
}

// vocabulary è¡¨ï¼ˆé¢„è®¾è¯æ±‡åº“ï¼‰
{
  id: number,
  word: string,
  definition: string,
  pronunciation: string,
  level: vocabularyLevelEnum,
}
```

### API æ¥å£

| æ¥å£                  | æ–¹æ³•  | è¯´æ˜                                 |
| --------------------- | ----- | ------------------------------------ |
| `PATCH /api/users/me` | PATCH | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…æ‹¬ vocabularyLevelï¼‰ |

---

## 3.3 æ–‡ç« åˆ†ææ¨¡å—ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

### åŠŸèƒ½æ¦‚è¿°

ç”¨æˆ·ä¸Šä¼ è‹±æ–‡æ–‡ç« ï¼Œç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«é™Œç”Ÿè¯æ±‡ï¼Œè°ƒç”¨ AI ç”Ÿæˆä¸Šä¸‹æ–‡ç›¸å…³çš„ä¸­æ–‡è§£é‡Šï¼ŒAI æ™ºèƒ½åˆ¤æ–­è¯¥å«ä¹‰æ˜¯å¦å·²æŒæ¡ï¼Œæœ€ç»ˆç”¨æˆ·ç¡®è®¤å¹¶ä¿å­˜æ–°å­¦ä¹ çš„å•è¯ã€‚

### æ ¸å¿ƒä¸šåŠ¡æµç¨‹

```
æ–‡ç« ä¸Šä¼ 
  â†“
Google NLP åˆ†è¯
  â†“
è¿‡æ»¤å·²çŸ¥è¯æ±‡ï¼ˆvocabulary + userKnownWordsï¼‰
  â†“
æŸ¥è¯¢ç”¨æˆ·å­¦ä¹ å†å²ï¼ˆuserLearnedMeaningsï¼‰
  â†“
AI ç”Ÿæˆè§£é‡Šï¼ˆåˆ¤æ–­ isExistingï¼‰
  â†“
å«ä¹‰åˆ†ç±»ï¼ˆnew / extend / existingï¼‰
  â†“
ç”¨æˆ·ç¡®è®¤é€‰æ‹©
  â†“
ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆä»… new å’Œ extendï¼‰
  â†“
ç­‰å¾…å¤ä¹ 
```

### è¯¦ç»†æµç¨‹

#### 3.3.1 é™Œç”Ÿè¯åˆæ­¥ç­›é€‰

**è¾“å…¥ï¼š**

- ç”¨æˆ·ä¸Šä¼ çš„æ–‡ç« å†…å®¹ï¼ˆçº¯æ–‡æœ¬ï¼‰
- ç”¨æˆ·çš„è¯æ±‡ç­‰çº§ï¼ˆ`vocabularyLevel`ï¼‰

**å¤„ç†é€»è¾‘ï¼š**

1. è°ƒç”¨ Google Cloud Natural Language API è¿›è¡Œåˆ†è¯
2. æå–æ‰€æœ‰è‹±æ–‡å•è¯çš„ **lemma**ï¼ˆè¯æ ¹ï¼‰å’Œ **pos**ï¼ˆè¯æ€§ï¼‰
3. è¿‡æ»¤è¿å­—ç¬¦å¤åˆè¯ï¼ˆå¦‚ "state-of-the-art"ï¼‰
4. è¿‡æ»¤çŸ­è¯ï¼ˆå°‘äº 3 ä¸ªå­—æ¯ï¼‰ã€æ•°å­—ã€ç¬¦å·ã€ç¼©å†™ç‰‡æ®µ
5. ä¸ **vocabulary è¡¨**ï¼ˆç³»ç»Ÿè¯æ±‡åº“ï¼‰æ¯”å¯¹ï¼Œè¿‡æ»¤å·²çŸ¥è¯æ±‡
6. ä¸ **userKnownWords è¡¨**ï¼ˆç”¨æˆ·å·²è®¤çŸ¥è¯æ±‡ï¼‰æ¯”å¯¹ï¼Œå†æ¬¡è¿‡æ»¤
7. å¾—åˆ°"é™Œç”Ÿå•è¯åˆ—è¡¨"

**è¾“å‡ºï¼š**

```typescript
UnfamiliarWord[] = [
  {
    word: "cryptocurrency",  // æ–‡ä¸­å½¢å¼
    lemma: "cryptocurrency", // è¯æ ¹ï¼ˆå°å†™ï¼‰
    pos: "NOUN",            // è¯æ€§
    offset: 125,            // åœ¨åŸæ–‡ä¸­çš„ä½ç½®
  },
  // ...
]
```

#### 3.3.2 æŸ¥è¯¢å·²å­¦ä¹ å«ä¹‰

**è¾“å…¥ï¼š**

- é™Œç”Ÿè¯æ±‡åˆ—è¡¨ï¼ˆlemmaï¼‰
- ç”¨æˆ· ID

**å¤„ç†é€»è¾‘ï¼š**

- æ‰¹é‡æŸ¥è¯¢ `userLearnedMeanings` è¡¨
- æ£€æŸ¥å“ªäº›å•è¯å·²æœ‰å­¦ä¹ è®°å½•
- æ”¶é›†æ¯ä¸ªå•è¯çš„æ‰€æœ‰å·²å­¦å«ä¹‰

**è¾“å‡ºï¼š**

```typescript
{
  newWords: ["cryptocurrency", "blockchain"],
  wordsWithMeanings: [
    {
      word: "run",
      existingMeanings: ["è·‘æ­¥", "è¿è¡Œç¨‹åº"]
    },
    {
      word: "deploy",
      existingMeanings: ["éƒ¨ç½²ä»£ç "]
    }
  ]
}
```

#### 3.3.3 AI è§£é‡Šè·å–é˜¶æ®µ

**è¾“å…¥ï¼š**

- æ–‡ç« å†…å®¹ï¼ˆå®Œæ•´æ–‡æœ¬ï¼‰
- `newWords[]` - å®Œå…¨é™Œç”Ÿçš„è¯æ±‡
- `wordsWithMeanings[]` - æœ‰å·²å­¦å«ä¹‰çš„è¯æ±‡

**AI Prompt è¦æ±‚ï¼š**

å¯¹äº `newWords`ï¼š

- æ ¹æ®æ–‡ç« ä¸Šä¸‹æ–‡è§£é‡Šè¯¥è¯å«ä¹‰
- è¿”å› `isExisting: false`

å¯¹äº `wordsWithMeanings`ï¼š

- åˆ¤æ–­å·²æœ‰å«ä¹‰æ˜¯å¦é€‚ç”¨äºå½“å‰ä¸Šä¸‹æ–‡
- **å¦‚æœé€‚ç”¨**ï¼šè¿”å› `isExisting: true`ï¼ˆä¸åˆ›å»ºæ–°è§£é‡Šï¼‰
- **å¦‚æœä¸é€‚ç”¨**ï¼šç”Ÿæˆæ–°çš„å«ä¹‰è§£é‡Šï¼Œè¿”å› `isExisting: false`

**AI é…ç½®ï¼š**

```typescript
{
  model: "gpt-4o-mini",
  temperature: 0,  // ç¡®ä¿è¾“å‡ºç¨³å®šæ€§
  response_format: { type: "json_object" }
}
```

**AI è¿”å›æ ¼å¼ï¼š**

```json
{
  "words": [
    {
      "wordInText": "cryptocurrency",
      "lemma": "cryptocurrency",
      "pos": "NOUN",
      "meaningText": "ä¸€ç§ä½¿ç”¨å¯†ç å­¦æŠ€æœ¯ä¿æŠ¤çš„æ•°å­—è´§å¸",
      "isExisting": false,
      "exampleSentence": "Bitcoin is a type of cryptocurrency."
    },
    {
      "wordInText": "run",
      "lemma": "run",
      "meaningText": "è¿è¡Œç¨‹åºï¼ˆå·²æŒæ¡ï¼‰",
      "isExisting": true,
      "exampleSentence": "Run the server to start."
    }
  ]
}
```

**å…³é”®å­—æ®µè¯´æ˜ï¼š**

- `wordInText`: å•è¯åœ¨æ–‡ç« ä¸­çš„å½¢å¼ï¼ˆç”¨äºå‰ç«¯å±•ç¤ºï¼‰
- `lemma`: å•è¯è¯æ ¹ï¼ˆç”¨äºæ•°æ®åº“ä¿å­˜å’ŒåŒ¹é…ï¼‰
- `meaningText`: ä¸Šä¸‹æ–‡ç›¸å…³çš„ä¸­æ–‡å«ä¹‰
- `isExisting`: **æ ¸å¿ƒå­—æ®µ**ï¼ŒAI åˆ¤æ–­è¯¥å«ä¹‰æ˜¯å¦å·²æŒæ¡
  - `true` = å·²æŒæ¡ï¼Œä¸ä¿å­˜åˆ°æ•°æ®åº“
  - `false` = æ–°å«ä¹‰ï¼Œå…è®¸ä¿å­˜
- `exampleSentence`: ä»æ–‡ç« ä¸­æå–çš„ä¾‹å¥

#### 3.3.4 å«ä¹‰åˆ†ç±»é˜¶æ®µ

**åˆ†ç±»é€»è¾‘ï¼š**

```typescript
function determineType(
  word: string,
  isExisting: boolean,
  wordsWithMeanings: any[]
): "new" | "extend" | "existing" {
  if (isExisting) {
    return "existing"; // å·²æœ‰å«ä¹‰é€‚ç”¨
  }

  const hasExistingMeanings = wordsWithMeanings.some(
    (item) => item.word === word
  );

  if (hasExistingMeanings) {
    return "extend"; // è¯¥è¯æœ‰å…¶ä»–å«ä¹‰ï¼Œè¿™æ˜¯æ–°çš„æ‰©å±•å«ä¹‰
  }

  return "new"; // å®Œå…¨é™Œç”Ÿçš„æ–°è¯
}
```

**åˆ†ç±»è¯´æ˜ï¼š**

| ç±»å‹         | æ¡ä»¶                              | å«ä¹‰     | æ˜¯å¦ä¿å­˜ | UI æ ·å¼          |
| ------------ | --------------------------------- | -------- | -------- | ---------------- |
| **new**      | `isExisting = false` ä¸”æ— å­¦ä¹ è®°å½• | å…¨æ–°å•è¯ | âœ… æ˜¯    | ç»¿è‰² "âœ¨ æ–°"     |
| **extend**   | `isExisting = false` ä½†æœ‰å­¦ä¹ è®°å½• | åŒè¯æ–°ä¹‰ | âœ… æ˜¯    | æ©™è‰² "ğŸ”„ æ‰©å±•"   |
| **existing** | `isExisting = true`               | å·²å­¦å«ä¹‰ | âŒ å¦    | ç°è‰² "ğŸ“– å·²æŒæ¡" |

**è¾“å‡ºï¼š**

```typescript
ClassifiedWordExplanation[] = [
  {
    word: "cryptocurrency",
    lemma: "cryptocurrency",
    meaningText: "ä¸€ç§ä½¿ç”¨å¯†ç å­¦æŠ€æœ¯ä¿æŠ¤çš„æ•°å­—è´§å¸",
    exampleSentence: "Bitcoin is a type of cryptocurrency.",
    type: "new",
    isExisting: false,
  },
  {
    word: "run",
    lemma: "run",
    meaningText: "è¿è¡ŒæœåŠ¡å™¨",
    exampleSentence: "Run the server to start.",
    type: "extend",
    isExisting: false,
    learnedMeanings: [
      { id: 123, meaningText: "è·‘æ­¥" },
      { id: 124, meaningText: "è¿è¡Œç¨‹åº" }
    ]
  },
  {
    word: "deploy",
    lemma: "deploy",
    meaningText: "éƒ¨ç½²ä»£ç ï¼ˆå·²æŒæ¡ï¼‰",
    exampleSentence: "Deploy the application now.",
    type: "existing",
    isExisting: true,
  }
]
```

#### 3.3.5 ç”¨æˆ·ç¡®è®¤ä¸é€‰æ‹©é˜¶æ®µ

**ç•Œé¢å±•ç¤ºè§„åˆ™ï¼š**

**é‡è¦åŸåˆ™ï¼š** æ‰€æœ‰å•è¯ï¼ˆåŒ…æ‹¬ `existing` ç±»å‹ï¼‰éƒ½å¿…é¡»åœ¨ UI ä¸­å±•ç¤ºï¼Œè®©ç”¨æˆ·äº†è§£åˆ†æç»“æœã€‚

**å•è¯å¡ç‰‡æ ·å¼ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘ [âœ¨ æ–°]                           â”‚
â”‚                                     â”‚
â”‚ cryptocurrency  n.                  â”‚
â”‚ ä¸€ç§ä½¿ç”¨å¯†ç å­¦æŠ€æœ¯ä¿æŠ¤çš„æ•°å­—è´§å¸        â”‚
â”‚ "Bitcoin is a type of..."          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘ [ğŸ”„ æ‰©å±•]                         â”‚
â”‚                                     â”‚
â”‚ run  v.                             â”‚
â”‚ è¿è¡ŒæœåŠ¡å™¨                           â”‚
â”‚ "Run the server to start."          â”‚
â”‚                                     â”‚
â”‚ å·²å­¦å«ä¹‰ï¼šv. è·‘æ­¥ | v. è¿è¡Œç¨‹åº      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜ [ğŸ“– å·²æŒæ¡]ï¼ˆä¸å¯å‹¾é€‰ï¼‰            â”‚
â”‚                                     â”‚
â”‚ deploy  v.                          â”‚
â”‚ éƒ¨ç½²ä»£ç                              â”‚
â”‚ "Deploy the application now."       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äº¤äº’è§„åˆ™ï¼š**

- `new` / `extend` ç±»å‹ï¼šé»˜è®¤å‹¾é€‰ï¼Œå¯å–æ¶ˆ
- `existing` ç±»å‹ï¼šé»˜è®¤ä¸å‹¾é€‰ï¼Œ**å¤é€‰æ¡†ç¦ç”¨**
- åº•éƒ¨æŒ‰é’®æ˜¾ç¤ºï¼š"ä¿å­˜é€‰ä¸­çš„ X ä¸ªå«ä¹‰"ï¼ˆåªç»Ÿè®¡å¯ä¿å­˜çš„å•è¯ï¼‰
- é¡¶éƒ¨ç»Ÿè®¡ï¼šæ–°è¯ X ä¸ªã€æ‰©å±• X ä¸ªã€å·²æŒæ¡ X ä¸ª

#### 3.3.6 æ•°æ®ä¿å­˜é˜¶æ®µ

**è¾“å…¥ï¼š**

- ç”¨æˆ·å‹¾é€‰çš„å•è¯åˆ—è¡¨ï¼ˆå‰ç«¯å·²è¿‡æ»¤æ‰ `isExisting: true`ï¼‰

**åç«¯éªŒè¯ï¼š**

```typescript
// Zod Schema åŒé‡éªŒè¯
const SaveWordSchema = z.object({
  word: z.string(),
  meaningText: z.string(),
  isExisting: z.literal(false), // å¿…é¡»æ˜¯ false
  exampleSentence: z.string(),
});
```

**ä¿å­˜é€»è¾‘ï¼š**

```typescript
// æ‰¹é‡æ’å…¥åˆ° userLearnedMeanings è¡¨
await db.insert(userLearnedMeanings).values([
  {
    userId: 1,
    word: "cryptocurrency",
    wordInText: "cryptocurrency",
    pos: "NOUN",
    meaningText: "ä¸€ç§ä½¿ç”¨å¯†ç å­¦æŠ€æœ¯ä¿æŠ¤çš„æ•°å­—è´§å¸",
    exampleSentence: "Bitcoin is a type of cryptocurrency.",
    sourceTextId: 123, // æ¥æºæ–‡ç«  ID
    // Anki ç®—æ³•åˆå§‹å€¼
    easeFactor: 2.5,
    intervalDays: 1,
    repetitions: 0,
    nextReviewDate: new Date(),
    lastSeenAt: new Date(),
  },
  // ...
]);
```

**è¿”å›ç»“æœï¼š**

```json
{
  "success": true,
  "data": {
    "savedCount": 5,
    "message": "å·²ä¿å­˜ 5 ä¸ªæ–°å•è¯å«ä¹‰"
  }
}
```

### æ•°æ®æ¨¡å‹

```typescript
// articles è¡¨ï¼ˆæ–‡ç« è®°å½•ï¼‰
{
  id: number,
  userId: number,
  title: string,
  content: string,
  source: string, // "çº½çº¦æ—¶æŠ¥" | "è‡ªå·±å†™çš„"
  wordCount: number,
  unfamiliarWordCount: number,
  analyzedAt: Date,
  createdAt: Date,
}

// userLearnedMeanings è¡¨ï¼ˆç”¨æˆ·å­¦ä¹ çš„å•è¯å«ä¹‰ï¼‰
{
  id: number,
  userId: number,
  word: string,            // è¯æ ¹ï¼ˆå°å†™ï¼‰
  wordInText: string,      // æ–‡ä¸­å½¢å¼
  pos: string,             // è¯æ€§
  meaningText: string,     // ä¸­æ–‡å«ä¹‰
  exampleSentence: string, // ä¾‹å¥
  sourceTextId: number,    // æ¥æºæ–‡ç«  ID
  // Anki å¤ä¹ ç®—æ³•å­—æ®µ
  easeFactor: number,      // éš¾åº¦ç³»æ•°ï¼ˆ2.5ï¼‰
  intervalDays: number,    // é—´éš”å¤©æ•°ï¼ˆ1ï¼‰
  repetitions: number,     // è¿ç»­æ­£ç¡®æ¬¡æ•°ï¼ˆ0ï¼‰
  nextReviewDate: Date,    // ä¸‹æ¬¡å¤ä¹ æ—¥æœŸ
  lastReviewedAt: Date,    // æœ€åå¤ä¹ æ—¶é—´
  totalReviews: number,    // ç´¯è®¡å¤ä¹ æ¬¡æ•°
  createdAt: Date,
  lastSeenAt: Date,
}
```

### API æ¥å£

| æ¥å£                         | æ–¹æ³• | è¯´æ˜                             |
| ---------------------------- | ---- | -------------------------------- |
| `POST /api/text/analyze`     | POST | åˆ†ææ–‡ç« ï¼Œè¿”å›é™Œç”Ÿè¯æ±‡ + AI è§£é‡Š |
| `POST /api/text/save-words`  | POST | ä¿å­˜ç”¨æˆ·é€‰ä¸­çš„å•è¯å«ä¹‰           |
| `GET /api/text/articles`     | GET  | æŸ¥è¯¢ç”¨æˆ·çš„æ–‡ç« åˆ—è¡¨               |
| `GET /api/text/articles/:id` | GET  | æŸ¥è¯¢å•ç¯‡æ–‡ç« è¯¦æƒ…                 |

### æ€§èƒ½æŒ‡æ ‡

- 10 ä¸ªå•è¯çš„åˆ†æ + åˆ†ç±»ï¼š**< 5 ç§’**
- 100 ä¸ªå•è¯çš„åˆ†æ + åˆ†ç±»ï¼š**< 15 ç§’**
- AI è°ƒç”¨å“åº”æ—¶é—´ï¼ˆ10 ä¸ªå•è¯ï¼‰ï¼š**< 3 ç§’**

---

## 3.4 å•è¯å¤ä¹ æ¨¡å—

### åŠŸèƒ½æ¦‚è¿°

åŸºäº **Anki SM-2 é—´éš”é‡å¤ç®—æ³•**ï¼Œç§‘å­¦å®‰æ’å¤ä¹ è®¡åˆ’ï¼Œå¸®åŠ©ç”¨æˆ·é«˜æ•ˆå·©å›ºè®°å¿†ã€‚

### Anki SM-2 ç®—æ³•åŸç†

**æ ¸å¿ƒå‚æ•°ï¼š**

- `easeFactor`: éš¾åº¦ç³»æ•°ï¼ˆ1.3 - 2.5+ï¼Œé»˜è®¤ 2.5ï¼‰
- `intervalDays`: å½“å‰é—´éš”å¤©æ•°
- `repetitions`: è¿ç»­æ­£ç¡®æ¬¡æ•°

**å››ä¸ªéš¾åº¦ç­‰çº§ï¼š**

| éš¾åº¦                  | æ“ä½œ     | æ•ˆæœ                      |
| --------------------- | -------- | ------------------------- |
| **Again**ï¼ˆå†æ¥ä¸€æ¬¡ï¼‰ | å®Œå…¨å¿˜è®° | é‡ç½®è¿›åº¦ï¼Œé—´éš”æ¢å¤ä¸º 1 å¤© |
| **Hard**ï¼ˆå›°éš¾ï¼‰      | å‹‰å¼ºè®°å¾— | å‡å°éš¾åº¦ç³»æ•°ï¼Œç¼©çŸ­é—´éš”    |
| **Good**ï¼ˆæ­£å¸¸ï¼‰      | æ­£å¸¸è®°å¾— | æ ‡å‡†é—´éš”å¢é•¿              |
| **Easy**ï¼ˆç®€å•ï¼‰      | è½»æ¾è®°å¾— | å¢åŠ éš¾åº¦ç³»æ•°ï¼Œæ‰©å¤§é—´éš”    |

**é—´éš”è®¡ç®—è§„åˆ™ï¼š**

```typescript
if (rating === "again") {
  return {
    easeFactor: Math.max(1.3, easeFactor - 0.2),
    intervalDays: 1,
    repetitions: 0,
  };
}

if (repetitions === 0) {
  intervalDays = 1; // ç¬¬ä¸€æ¬¡æ­£ç¡®ï¼š1 å¤©
} else if (repetitions === 1) {
  intervalDays = 6; // ç¬¬äºŒæ¬¡æ­£ç¡®ï¼š6 å¤©
} else {
  intervalDays = Math.round(intervalDays * easeFactor); // åº”ç”¨éš¾åº¦ç³»æ•°
}
```

### å¤ä¹ æµç¨‹

```
ç”¨æˆ·æ‰“å¼€å¤ä¹ é¡µé¢
  â†“
æŸ¥è¯¢å¾…å¤ä¹ å¡ç‰‡ï¼ˆnextReviewDate <= nowï¼‰
  â†“
ä¼˜å…ˆçº§æ’åºï¼ˆæ–°å¡ç‰‡ > å­¦ä¹ ä¸­ > å¤ä¹ ä¸­ï¼‰
  â†“
å±•ç¤ºå¡ç‰‡ï¼ˆå•è¯ + ä¾‹å¥ï¼‰
  â†“
ç”¨æˆ·ç‚¹å‡»"æ˜¾ç¤ºç­”æ¡ˆ"
  â†“
å±•ç¤ºå«ä¹‰è§£é‡Š
  â†“
ç”¨æˆ·é€‰æ‹©éš¾åº¦ï¼ˆAgain / Hard / Good / Easyï¼‰
  â†“
æ›´æ–° Anki å‚æ•°ï¼Œè®¡ç®—ä¸‹æ¬¡å¤ä¹ æ—¥æœŸ
  â†“
æ›´æ–°å­¦ä¹ ç»Ÿè®¡
  â†“
å±•ç¤ºä¸‹ä¸€å¼ å¡ç‰‡
```

### å¡ç‰‡å±•ç¤º

**æ­£é¢ï¼ˆQuestionï¼‰ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚         cryptocurrency              â”‚
â”‚        /ËŒkrÉªptÉ™ÊŠËˆkÊŒrÉ™nsi/          â”‚
â”‚                                     â”‚
â”‚  "Bitcoin is a type of             â”‚
â”‚   cryptocurrency."                  â”‚
â”‚                                     â”‚
â”‚         [æ˜¾ç¤ºç­”æ¡ˆ]                   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**èƒŒé¢ï¼ˆAnswerï¼‰ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚         cryptocurrency              â”‚
â”‚        /ËŒkrÉªptÉ™ÊŠËˆkÊŒrÉ™nsi/          â”‚
â”‚                                     â”‚
â”‚  å«ä¹‰ï¼šä¸€ç§ä½¿ç”¨å¯†ç å­¦æŠ€æœ¯ä¿æŠ¤çš„æ•°å­—è´§å¸ â”‚
â”‚                                     â”‚
â”‚  "Bitcoin is a type of             â”‚
â”‚   cryptocurrency."                  â”‚
â”‚                                     â”‚
â”‚  [å†æ¥ä¸€æ¬¡] [å›°éš¾] [æ­£å¸¸] [ç®€å•]      â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¤ä¹ ç»Ÿè®¡

**å¤ä¹ æ¦‚è§ˆï¼š**

- ä»Šæ—¥å¾…å¤ä¹ ï¼š15 ä¸ª
- æ–°å¡ç‰‡ï¼š5 ä¸ª
- å­¦ä¹ ä¸­ï¼š7 ä¸ªï¼ˆé—´éš” < 21 å¤©ï¼‰
- å¤ä¹ ä¸­ï¼š3 ä¸ªï¼ˆé—´éš” >= 21 å¤©ï¼‰
- æ€»è¯æ±‡é‡ï¼š120 ä¸ª
- ä»Šæ—¥å·²å®Œæˆï¼š8 ä¸ª

### æ•°æ®æ¨¡å‹

```typescript
// userLearnedMeanings è¡¨ï¼ˆAnki å­—æ®µï¼‰
{
  easeFactor: number,      // éš¾åº¦ç³»æ•°ï¼ˆ1.3 - 2.5+ï¼‰
  intervalDays: number,    // é—´éš”å¤©æ•°
  repetitions: number,     // è¿ç»­æ­£ç¡®æ¬¡æ•°
  nextReviewDate: Date,    // ä¸‹æ¬¡å¤ä¹ æ—¥æœŸ
  lastReviewedAt: Date,    // æœ€åå¤ä¹ æ—¶é—´
  totalReviews: number,    // ç´¯è®¡å¤ä¹ æ¬¡æ•°
}
```

### API æ¥å£

| æ¥å£                      | æ–¹æ³• | è¯´æ˜                     |
| ------------------------- | ---- | ------------------------ |
| `GET /api/review/stats`   | GET  | è·å–å¤ä¹ ç»Ÿè®¡æ•°æ®         |
| `GET /api/review/next`    | GET  | è·å–ä¸‹ä¸€å¼ å¾…å¤ä¹ å¡ç‰‡     |
| `POST /api/review/submit` | POST | æäº¤ç­”æ¡ˆï¼Œæ›´æ–° Anki å‚æ•° |

---

## 3.5 ç”¨æˆ·å·²è®¤çŸ¥è¯æ±‡ç®¡ç†

### åŠŸèƒ½æ¦‚è¿°

å…è®¸ç”¨æˆ·æ‰‹åŠ¨æ·»åŠ  **å·²è®¤è¯†çš„è¯æ±‡**ï¼ˆå¦‚ä¸“ä¸šæœ¯è¯­ã€é¢†åŸŸè¯æ±‡ï¼‰ï¼Œç³»ç»Ÿåœ¨åˆ†ææ–‡ç« æ—¶è‡ªåŠ¨è¿‡æ»¤è¿™äº›è¯æ±‡ã€‚

### åŠŸèƒ½ç»†èŠ‚

#### 3.5.1 æ·»åŠ å·²è®¤çŸ¥è¯æ±‡

**æ–¹å¼ä¸€ï¼šåœ¨æ–‡ç« åˆ†ææ—¶æ ‡è®°**

- ç”¨æˆ·åœ¨å•è¯ç¡®è®¤é¡µé¢ï¼Œç‚¹å‡»"æ ‡è®°ä¸ºå·²è®¤è¯†"
- ç³»ç»Ÿå°†è¯¥å•è¯æ·»åŠ åˆ° `userKnownWords` è¡¨

**æ–¹å¼äºŒï¼šæ‰‹åŠ¨æ·»åŠ **

- ç”¨æˆ·åœ¨"è¯æ±‡ç®¡ç†"é¡µé¢ï¼Œè¾“å…¥å•è¯
- ç³»ç»Ÿè‡ªåŠ¨æå– lemmaï¼ˆè¯æ ¹ï¼‰
- é˜²æ­¢é‡å¤æ·»åŠ ï¼ˆå”¯ä¸€çº¦æŸï¼‰

**æ–¹å¼ä¸‰ï¼šæ‰¹é‡å¯¼å…¥**ï¼ˆé¢„ç•™åŠŸèƒ½ï¼‰

- ç”¨æˆ·ä¸Šä¼  .txt æ–‡ä»¶ï¼ˆæ¯è¡Œä¸€ä¸ªå•è¯ï¼‰
- ç³»ç»Ÿæ‰¹é‡å¯¼å…¥åˆ° `userKnownWords` è¡¨

#### 3.5.2 è¿‡æ»¤ä¼˜å…ˆçº§

åœ¨æ–‡ç« åˆ†ææ—¶ï¼Œè¿‡æ»¤é¡ºåºï¼š

```
1. vocabularyï¼ˆç³»ç»Ÿè¯æ±‡åº“ï¼ŒåŸºäºç”¨æˆ·ç­‰çº§ï¼‰
   â†“
2. userKnownWordsï¼ˆç”¨æˆ·å·²è®¤çŸ¥è¯æ±‡ï¼‰
   â†“
3. userLearnedMeaningsï¼ˆæ¿€è¿›æ¨¡å¼ï¼šæ­£åœ¨å­¦ä¹ çš„è¯ï¼‰
```

#### 3.5.3 è¯æ±‡åˆ—è¡¨ç®¡ç†

- æŸ¥çœ‹å·²è®¤çŸ¥è¯æ±‡åˆ—è¡¨
- æœç´¢è¯æ±‡
- åˆ é™¤è¯æ±‡
- æŒ‰æ·»åŠ æ—¶é—´æ’åº

### æ•°æ®æ¨¡å‹

```typescript
// userKnownWords è¡¨
{
  id: number,
  userId: number,
  word: string,  // ç”¨æˆ·æ·»åŠ çš„åŸå§‹å½¢å¼
  lemma: string, // æ ‡å‡†åŒ–åçš„è¯æ ¹ï¼ˆå°å†™ï¼‰
  createdAt: Date,
}
```

### API æ¥å£

| æ¥å£                              | æ–¹æ³•   | è¯´æ˜               |
| --------------------------------- | ------ | ------------------ |
| `POST /api/known-words/add`       | POST   | æ·»åŠ å·²è®¤çŸ¥è¯æ±‡     |
| `DELETE /api/known-words/remove`  | DELETE | åˆ é™¤å·²è®¤çŸ¥è¯æ±‡     |
| `GET /api/known-words/list`       | GET    | æŸ¥è¯¢å·²è®¤çŸ¥è¯æ±‡åˆ—è¡¨ |
| `POST /api/known-words/batch-add` | POST   | æ‰¹é‡æ·»åŠ ï¼ˆé¢„ç•™ï¼‰   |

---

## 3.6 é…é¢ç®¡ç†æ¨¡å— âœ… å·²å®ç°

### åŠŸèƒ½æ¦‚è¿°

åŸºäº **è®¢é˜…ç­‰çº§** æ§åˆ¶ç”¨æˆ·çš„æ¯æ—¥æ–‡ç« åˆ†ææ¬¡æ•°å’Œå•ç¯‡å­—æ•°é™åˆ¶ï¼Œå®ç°æˆæœ¬æ§åˆ¶å’Œå˜ç°ã€‚

### è®¢é˜…ç­‰çº§

| ç­‰çº§                  | æ¯æ—¥åˆ†ææ¬¡æ•° | å•ç¯‡å­—æ•°é™åˆ¶ | ä»·æ ¼                              |
| --------------------- | ------------ | ------------ | --------------------------------- |
| **Free**ï¼ˆå…è´¹ç‰ˆï¼‰    | 2 ç¯‡         | 1,000 è¯     | $0ï¼ˆæ°¸ä¹…å…è´¹ï¼‰                    |
| **Premium**ï¼ˆä¸“ä¸šç‰ˆï¼‰ | 50 ç¯‡        | 5,000 è¯     | $7/æœˆï¼ˆå¹´ä»˜ $67/å¹´ï¼Œäº« 20% æŠ˜æ‰£ï¼‰ |

### é…é¢æ£€æŸ¥æµç¨‹

```
ç”¨æˆ·è¯·æ±‚åˆ†ææ–‡ç«  (POST /api/text/analyze)
  â†“
quotaCheck ä¸­é—´ä»¶æ‹¦æˆª
  â†“
æŸ¥è¯¢ç”¨æˆ·è®¢é˜…ç­‰çº§ï¼ˆsubscriptions è¡¨ï¼‰
  â†“
æŸ¥è¯¢é…é¢é…ç½®ï¼ˆquotaConfigs è¡¨ï¼‰
  â†“
æŸ¥è¯¢ä»Šæ—¥å·²ä½¿ç”¨æ¬¡æ•°ï¼ˆuserLearningStats è¡¨ï¼‰
  â†“
åˆ¤æ–­æ¬¡æ•°æ˜¯å¦è¶…é™
  â”œâ”€ æœªè¶…é™ï¼šæ‰£è´¹ï¼ˆarticlesAnalyzedCount + 1ï¼‰ï¼Œæ³¨å…¥ quotaInfo åˆ°ä¸Šä¸‹æ–‡
  â””â”€ å·²è¶…é™ï¼šè¿”å› 429 é”™è¯¯
  â†“
text.route å­—æ•°éªŒè¯
  â†“
è®¡ç®—æ–‡ç« å­—æ•°ï¼ˆæŒ‰ç©ºæ ¼åˆ†è¯ï¼‰
  â†“
åˆ¤æ–­å­—æ•°æ˜¯å¦è¶…é™
  â”œâ”€ æœªè¶…é™ï¼šç»§ç»­æ–‡ç« åˆ†æ
  â””â”€ å·²è¶…é™ï¼šè¿”å› 400 é”™è¯¯
```

### æ ¸å¿ƒåŠŸèƒ½

1. **æ¯æ—¥æ¬¡æ•°é™åˆ¶**ï¼šä¸­é—´ä»¶åœ¨è¯·æ±‚å‰æ£€æŸ¥å¹¶æ‰£è´¹
2. **å­—æ•°é™åˆ¶éªŒè¯**ï¼šè·¯ç”±å±‚é¢æ£€æŸ¥æ–‡ç« å­—æ•°
3. **å‰ç«¯é…é¢æ˜¾ç¤º**ï¼šDashboard æ˜¾ç¤ºé…é¢å¡ç‰‡å’Œè¿›åº¦æ¡
4. **å®æ—¶å­—æ•°ç»Ÿè®¡**ï¼šå‰ç«¯å®æ—¶æ˜¾ç¤ºå­—æ•°ï¼Œè¶…é™æ—¶ç¦ç”¨æŒ‰é’®
5. **å‡çº§å¼•å¯¼**ï¼šè¶…é™æ—¶å¼¹å‡ºå‡çº§æ¨¡æ€æ¡†

### æ•°æ®æ¨¡å‹

```typescript
// subscriptions è¡¨ï¼ˆè®¢é˜…è®°å½•ï¼‰
{
  userId: number,
  tier: 'free' | 'premium',
  status: 'active' | 'cancelled' | 'expired',
  stripeSubscriptionId: string,
  startedAt: Date,
  expiresAt: Date,
}

// quotaConfigs è¡¨ï¼ˆé…é¢é…ç½®ï¼‰
{
  tier: 'free' | 'premium',
  dailyArticlesLimit: number,  // æ¯æ—¥æ¬¡æ•°é™åˆ¶
  maxArticleWords: number,      // å•ç¯‡å­—æ•°é™åˆ¶
}

// userLearningStats è¡¨ï¼ˆæ¯æ—¥ä½¿ç”¨ç»Ÿè®¡ï¼‰
{
  userId: number,
  date: Date, // é›¶ç‚¹æ—¶é—´æˆ³ï¼ˆUTCï¼‰
  articlesAnalyzedCount: number, // å½“æ—¥å·²åˆ†ææ¬¡æ•°
}
```

### API æ¥å£

| æ¥å£                             | æ–¹æ³• | è¯´æ˜                                                                         |
| -------------------------------- | ---- | ---------------------------------------------------------------------------- |
| `GET /api/users/me/quota`        | GET  | æŸ¥è¯¢é…é¢ä¿¡æ¯ï¼ˆtier, dailyLimit, usedToday, remainingToday, maxArticleWordsï¼‰ |
| `GET /api/users/me/subscription` | GET  | æŸ¥è¯¢è®¢é˜…è¯¦æƒ…ï¼ˆtier, status, amount, expiresAtï¼‰                              |

### è¯¦ç»†æŠ€æœ¯è§„èŒƒ

å‚è§ `@docs/tech/quota-system.md` è·å–å®Œæ•´çš„æŠ€æœ¯å®ç°ç»†èŠ‚ã€‚

---

## 3.7 å­¦ä¹ ç»Ÿè®¡æ¨¡å—

### åŠŸèƒ½æ¦‚è¿°

è®°å½•ç”¨æˆ·çš„ **æ¯æ—¥å­¦ä¹ æ•°æ®**ï¼Œç”Ÿæˆå­¦ä¹ æ›²çº¿å’Œç»Ÿè®¡æŠ¥è¡¨ã€‚

### ç»Ÿè®¡ç»´åº¦

**æ¯æ—¥ç»Ÿè®¡ï¼ˆuserLearningStats è¡¨ï¼‰ï¼š**

- æ–°å¢å•è¯æ•°ï¼ˆ`newWordsCount`ï¼‰
- å¤ä¹ å•è¯æ•°ï¼ˆ`reviewedCount`ï¼‰
- ç­”å¯¹å•è¯æ•°ï¼ˆ`correctCount`ï¼‰
- é˜…è¯»æ–‡ç« æ•°ï¼ˆ`articlesRead`ï¼‰
- é˜…è¯»å•è¯æ•°ï¼ˆ`wordsRead`ï¼‰
- å­¦ä¹ æ—¶é•¿ï¼ˆ`timeSpentMinutes`ï¼‰
- æ–‡ç« åˆ†ææ¬¡æ•°ï¼ˆ`articlesAnalyzedCount`ï¼‰

**ç´¯è®¡ç»Ÿè®¡ï¼š**

- æ€»è¯æ±‡é‡ï¼ˆ`userLearnedMeanings` è¡¨çš„æ€»è®°å½•æ•°ï¼‰
- å·²æŒæ¡è¯æ±‡é‡ï¼ˆé—´éš” > 90 å¤©çš„å•è¯æ•°é‡ï¼‰
- å­¦ä¹ å¤©æ•°ï¼ˆ`userLearningStats` è¡¨çš„è®°å½•æ•°ï¼‰

### æ•°æ®å±•ç¤º

**ç»Ÿè®¡å¡ç‰‡ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä»Šæ—¥æ–°å¢è¯æ±‡    â”‚  â”‚  ä»Šæ—¥å¤ä¹ å®Œæˆ    â”‚
â”‚      8 ä¸ª       â”‚  â”‚     15 ä¸ª       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ€»è¯æ±‡é‡        â”‚  â”‚  è¿ç»­å­¦ä¹ å¤©æ•°    â”‚
â”‚     120 ä¸ª      â”‚  â”‚      12 å¤©      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æ¨¡å‹

```typescript
// userLearningStats è¡¨
{
  id: number,
  userId: number,
  date: Date, // æ—¥æœŸï¼ˆé›¶ç‚¹æ—¶é—´æˆ³ï¼‰
  // è¯æ±‡å­¦ä¹ ç»Ÿè®¡
  newWordsCount: number,
  reviewedCount: number,
  correctCount: number,
  // é˜…è¯»ç»Ÿè®¡
  articlesRead: number,
  wordsRead: number,
  // æ—¶é—´ç»Ÿè®¡
  timeSpentMinutes: number,
  // é…é¢ä½¿ç”¨ç»Ÿè®¡
  articlesAnalyzedCount: number,
  createdAt: Date,
  updatedAt: Date,
}
```

### API æ¥å£

| æ¥å£                     | æ–¹æ³• | è¯´æ˜                           |
| ------------------------ | ---- | ------------------------------ |
| `GET /api/stats/daily`   | GET  | æŸ¥è¯¢æ¯æ—¥ç»Ÿè®¡æ•°æ®               |
| `GET /api/stats/summary` | GET  | æŸ¥è¯¢ç´¯è®¡ç»Ÿè®¡æ•°æ®               |
| `GET /api/stats/chart`   | GET  | æŸ¥è¯¢å­¦ä¹ æ›²çº¿æ•°æ®ï¼ˆæœ€è¿‘ 30 å¤©ï¼‰ |

---

## 3.8 ç”¨æˆ·ä¸­å¿ƒ

### åŠŸèƒ½æ¦‚è¿°

ç”¨æˆ·ä¸ªäººä¿¡æ¯ç®¡ç†ã€è®¾ç½®ç®¡ç†ã€‚

### åŠŸèƒ½ç»†èŠ‚

#### 3.8.1 ä¸ªäººä¿¡æ¯

- æ˜µç§°ï¼ˆ`name`ï¼‰
- é‚®ç®±ï¼ˆ`email`ï¼‰
- æ‰‹æœºå·ï¼ˆ`phoneNumber`ï¼‰
- å¤´åƒï¼ˆ`avatarUrl`ï¼‰
- è¯æ±‡ç­‰çº§ï¼ˆ`vocabularyLevel`ï¼‰

#### 3.8.2 è´¦æˆ·è®¾ç½®

- ä¿®æ”¹å¯†ç 
- ç»‘å®šç¬¬ä¸‰æ–¹è´¦å·ï¼ˆé¢„ç•™ï¼‰
- è´¦å·å®‰å…¨ï¼ˆæŸ¥çœ‹ç™»å½•è®¾å¤‡ã€ç™»å‡ºæ‰€æœ‰è®¾å¤‡ï¼‰

#### 3.8.3 å­¦ä¹ è®¾ç½®

- æ¯æ—¥å¤ä¹ ç›®æ ‡ï¼ˆ10 / 20 / 50 ä¸ªï¼‰
- æ–°å¡ç‰‡æ¯æ—¥ä¸Šé™ï¼ˆ5 / 10 / 20 ä¸ªï¼‰
- å¤ä¹ æé†’ï¼ˆæ¨é€é€šçŸ¥ï¼Œé¢„ç•™ï¼‰

#### 3.8.4 è®¢é˜…ç®¡ç†

- å½“å‰è®¢é˜…ç­‰çº§
- è®¢é˜…æœ‰æ•ˆæœŸ
- å‡çº§/ç»­è´¹ï¼ˆè·³è½¬æ”¯ä»˜é¡µé¢ï¼‰
- å–æ¶ˆè®¢é˜…

### API æ¥å£

| æ¥å£                              | æ–¹æ³•   | è¯´æ˜             |
| --------------------------------- | ------ | ---------------- |
| `GET /api/users/me`               | GET    | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ |
| `PATCH /api/users/me`             | PATCH  | æ›´æ–°ç”¨æˆ·ä¿¡æ¯     |
| `POST /api/users/change-password` | POST   | ä¿®æ”¹å¯†ç          |
| `GET /api/users/sessions`         | GET    | æŸ¥è¯¢ç™»å½•è®¾å¤‡åˆ—è¡¨ |
| `DELETE /api/users/sessions/:id`  | DELETE | ç™»å‡ºæŒ‡å®šè®¾å¤‡     |

---

## å››ã€æ•°æ®æ¨¡å‹

### 4.1 ER å›¾ï¼ˆæ ¸å¿ƒè¡¨å…³ç³»ï¼‰

```
users (ç”¨æˆ·è¡¨)
  â”œâ”€â”€ 1:N â†’ sessions (ä¼šè¯è¡¨)
  â”œâ”€â”€ 1:N â†’ accounts (è´¦æˆ·å…³è”è¡¨)
  â”œâ”€â”€ 1:N â†’ subscriptions (è®¢é˜…è®°å½•è¡¨)
  â”œâ”€â”€ 1:N â†’ articles (æ–‡ç« è¡¨)
  â”œâ”€â”€ 1:N â†’ userLearnedMeanings (å­¦ä¹ çš„å•è¯å«ä¹‰è¡¨)
  â”œâ”€â”€ 1:N â†’ userKnownWords (å·²è®¤çŸ¥è¯æ±‡è¡¨)
  â””â”€â”€ 1:N â†’ userLearningStats (å­¦ä¹ ç»Ÿè®¡è¡¨)

vocabulary (ç³»ç»Ÿè¯æ±‡åº“)
  â””â”€â”€ å…¨å±€å…±äº«ï¼Œä¸å…³è”ç”¨æˆ·

quotaConfigs (é…é¢é…ç½®è¡¨)
  â””â”€â”€ å…¨å±€é…ç½®ï¼ŒæŒ‰è®¢é˜…ç­‰çº§æŸ¥è¯¢
```

### 4.2 æ ¸å¿ƒè¡¨å­—æ®µ

è¯¦è§å„åŠŸèƒ½æ¨¡å—çš„"æ•°æ®æ¨¡å‹"ç« èŠ‚ã€‚

---

## äº”ã€æŠ€æœ¯æ¶æ„

### 5.1 æŠ€æœ¯æ ˆ

**åç«¯ï¼ˆCloudflare Workersï¼‰ï¼š**

- **æ¡†æ¶**ï¼šHono.jsï¼ˆWeb æ ‡å‡† APIï¼‰
- **è®¤è¯**ï¼šBetter Authï¼ˆæ‰‹æœºå· + é‚®ç®±åŒæ¨¡å¼ï¼‰
- **æ•°æ®åº“**ï¼šPostgreSQL (Neonï¼ŒHTTP è¿æ¥)
- **ORM**ï¼šDrizzle ORMï¼ˆç±»å‹å®‰å…¨ï¼‰
- **æ ¡éªŒ**ï¼šZodï¼ˆSchema éªŒè¯ï¼‰
- **AI**ï¼šOpenAI GPT-4o-mini
- **NLP**ï¼šGoogle Cloud Natural Language API

**å‰ç«¯ï¼ˆReactï¼‰ï¼š**

- **æ¡†æ¶**ï¼šReact 19 + TypeScript
- **è·¯ç”±**ï¼šReact Router v7
- **çŠ¶æ€ç®¡ç†**ï¼šTanStack Query
- **UI ç»„ä»¶**ï¼šRadix UI + Tailwind CSS
- **è¡¨å•**ï¼šReact Hook Form + Zod
- **å›¾è¡¨**ï¼šRechartsï¼ˆé¢„ç•™ï¼‰

**Monorepo ç»“æ„ï¼š**

- `projects/api` - åç«¯ API
- `projects/client` - å‰ç«¯åº”ç”¨
- `projects/shared` - å…±äº«ç±»å‹

### 5.2 æ¶æ„ç‰¹ç‚¹

1. **Serverless ä¼˜å…ˆ**ï¼šCloudflare Workers è¾¹ç¼˜è®¡ç®—
2. **ç±»å‹å®‰å…¨**ï¼šå…¨æ ˆ TypeScript + Zod éªŒè¯
3. **ä¾èµ–æ³¨å…¥**ï¼šé€šè¿‡ Hono ä¸­é—´ä»¶æ³¨å…¥ `db` å’Œ `auth`
4. **Web æ ‡å‡† API**ï¼šæ˜“äºè¿ç§»åˆ° Node.js
5. **HTTP è¿æ¥**ï¼šNeon Serverless Driverï¼ˆæ— éœ€è¿æ¥æ± ï¼‰

### 5.3 éƒ¨ç½²æ¶æ„

```
ç”¨æˆ·æµè§ˆå™¨
  â†“
Cloudflare CDNï¼ˆå‰ç«¯é™æ€èµ„æºï¼‰
  â†“
Cloudflare Workersï¼ˆåç«¯ APIï¼‰
  â”œâ”€â”€ Neon PostgreSQLï¼ˆæ•°æ®åº“ï¼‰
  â”œâ”€â”€ OpenAI APIï¼ˆAI è§£é‡Šï¼‰
  â””â”€â”€ Google NLP APIï¼ˆåˆ†è¯ï¼‰
```

---

## å…­ã€æ€§èƒ½æŒ‡æ ‡

### 6.1 å“åº”æ—¶é—´

| æ“ä½œ               | ç›®æ ‡å“åº”æ—¶é—´ | è¯´æ˜             |
| ------------------ | ------------ | ---------------- |
| ç”¨æˆ·ç™»å½•           | < 500ms      | ä¸å«éªŒè¯ç å‘é€   |
| æ–‡ç« åˆ†æï¼ˆ10 è¯ï¼‰  | < 5s         | å« NLP + AI è°ƒç”¨ |
| æ–‡ç« åˆ†æï¼ˆ100 è¯ï¼‰ | < 15s        | å« NLP + AI è°ƒç”¨ |
| å¤ä¹ å¡ç‰‡åŠ è½½       | < 200ms      | æ•°æ®åº“æŸ¥è¯¢       |
| ä¿å­˜å¤ä¹ ç»“æœ       | < 300ms      | æ•°æ®åº“æ›´æ–°       |

### 6.2 å¹¶å‘èƒ½åŠ›

- Cloudflare Workers è‡ªåŠ¨æ‰©å±•
- æ•°æ®åº“è¿æ¥ï¼šNeon HTTPï¼ˆæ— è¿æ¥æ± é™åˆ¶ï¼‰
- AI è°ƒç”¨ï¼šOpenAI é™æµï¼ˆtier 1: 500 RPMï¼‰

### 6.3 æˆæœ¬ä¼°ç®—ï¼ˆMVP é˜¶æ®µï¼‰

**å‡è®¾ï¼š** 100 åæ´»è·ƒç”¨æˆ·ï¼Œæ¯äººæ¯å¤©åˆ†æ 2 ç¯‡æ–‡ç« ï¼Œæ¯ç¯‡ 50 ä¸ªé™Œç”Ÿè¯

| æœåŠ¡               | ç”¨é‡          | å•ä»·       | æœˆæˆæœ¬      |
| ------------------ | ------------- | ---------- | ----------- |
| Cloudflare Workers | 600 ä¸‡è¯·æ±‚    | å…è´¹é¢åº¦å†… | Â¥0          |
| Neon PostgreSQL    | 1 GB å­˜å‚¨     | å…è´¹é¢åº¦å†… | Â¥0          |
| OpenAI GPT-4o-mini | 300 ä¸‡ tokens | $0.15/1M   | Â¥36         |
| Google NLP API     | 30 ä¸‡æ¬¡       | $1.00/1K   | Â¥150        |
| **æ€»è®¡**           | -             | -          | **Â¥186/æœˆ** |

---

## ä¸ƒã€åç»­è¿­ä»£è®¡åˆ’

### 7.0 å·²å®ŒæˆåŠŸèƒ½ âœ…

1. **é…é¢ç®¡ç†ç³»ç»Ÿ**

   - âœ… Free (2 ç¯‡/1000 è¯) vs Premium (50 ç¯‡/5000 è¯)
   - âœ… æ¯æ—¥æ¬¡æ•°é™åˆ¶å’Œå­—æ•°é™åˆ¶éªŒè¯
   - âœ… é…é¢æ˜¾ç¤ºå¡ç‰‡å’Œè¿›åº¦æ¡
   - âœ… å‡çº§å¼•å¯¼å¼¹çª—

2. **Stripe æ”¯ä»˜é›†æˆ**
   - âœ… è®¢é˜…æ”¯ä»˜ï¼ˆæœˆä»˜/å¹´ä»˜ï¼‰
   - âœ… Webhook è‡ªåŠ¨å¤„ç†è®¢é˜…ç”Ÿå‘½å‘¨æœŸ
   - âœ… æ”¯ä»˜æˆåŠŸ/å–æ¶ˆé¡µé¢
   - âœ… è®¢é˜…ç®¡ç†é¡µé¢

### 7.1 è¿‘æœŸè¿­ä»£

1. **æ¿€è¿›æ¨¡å¼å¼€å…³**

   - åœ¨åˆ†ææ–‡æœ¬é¡µé¢ï¼Œæ‰“å¼€å¼€å…³åï¼Œä¼šæŠŠç”¨æˆ·æ­£åœ¨å­¦ä¹ çš„å•è¯ä¹Ÿçº³å…¥è¿‡æ»¤

2. **å­¦ä¹ å•è¯åˆ—è¡¨ä¼˜åŒ–**

   - æ”¯æŒç¼–è¾‘å«ä¹‰ã€ä¾‹å¥
   - æ”¯æŒåˆ é™¤å•è¯
   - æ”¯æŒæœç´¢å’Œç­›é€‰

3. **æ‰¹é‡å¯¼å…¥å·²è®¤çŸ¥è¯æ±‡**

   - æ”¯æŒ .txt æ–‡ä»¶ä¸Šä¼ 
   - æ”¯æŒä»å…¶ä»–å¹³å°å¯¼å…¥ï¼ˆAnkiã€Quizletï¼‰

4. **ç•™è¨€æ¿å—/è”ç³»ç®¡ç†å‘˜**
   - ç”¨æˆ·åé¦ˆå…¥å£
   - é—®é¢˜æ”¯æŒ

### 7.2 ä¸­æœŸè¿­ä»£

1. **æ”¯ä»˜ç³»ç»Ÿ** âœ… å·²å®ç° (Stripe)

   - âœ… Stripe è®¢é˜…æ”¯ä»˜ï¼ˆæœˆä»˜ $7 / å¹´ä»˜ $67ï¼‰
   - âœ… Webhook è‡ªåŠ¨å¤„ç†è®¢é˜…çŠ¶æ€
   - âœ… è®¢é˜…ç®¡ç†é¡µé¢ï¼ˆæŸ¥çœ‹/å–æ¶ˆè®¢é˜…ï¼‰
   - â³ æ”¯ä»˜å®æ”¯ä»˜ï¼ˆæœªæ¥è®¡åˆ’ï¼‰
   - â³ å¾®ä¿¡æ”¯ä»˜ï¼ˆæœªæ¥è®¡åˆ’ï¼‰

2. **å­¦ä¹ æ•°æ®å¯è§†åŒ–**

   - å­¦ä¹ æ›²çº¿å›¾è¡¨
   - è¯æ±‡æŒæ¡åº¦åˆ†æ
   - å¤ä¹ æ•ˆæœç»Ÿè®¡

3. **è¯æ±‡æœ¬åŠŸèƒ½**

   - åˆ›å»ºå¤šä¸ªè¯æ±‡æœ¬ï¼ˆå¦‚"æŠ€æœ¯è¯æ±‡"ã€"é›…æ€è¯æ±‡"ï¼‰
   - è¯æ±‡æœ¬é—´çš„å¯¼å…¥å¯¼å‡º

4. **ç§»åŠ¨ç«¯é€‚é…**
   - å“åº”å¼è®¾è®¡ä¼˜åŒ–
   - PWA æ”¯æŒ

### 7.3 é•¿æœŸè¿­ä»£

1. **ç¤¾åŒºåŠŸèƒ½**

   - è¯æ±‡æœ¬åˆ†äº«
   - ç”¨æˆ·äº’åŠ¨ï¼ˆç‚¹èµã€è¯„è®ºï¼‰
   - è¯æ±‡æ’è¡Œæ¦œ

2. **AI å¢å¼ºåŠŸèƒ½**

   - è‡ªåŠ¨ç”Ÿæˆæ›´å¤šä¾‹å¥
   - è¯­éŸ³æœ—è¯»ï¼ˆTTSï¼‰
   - æ™ºèƒ½æ¨èæ–‡ç« 

3. **å¤šè¯­è¨€æ”¯æŒ**

   - æ”¯æŒå…¶ä»–è¯­è¨€å­¦ä¹ ï¼ˆæ—¥è¯­ã€è¥¿ç­ç‰™è¯­ç­‰ï¼‰

4. **API å¼€æ”¾å¹³å°**
   - æä¾›å¼€æ”¾ API
   - ç¬¬ä¸‰æ–¹åº”ç”¨é›†æˆ

---

## å…«ã€é™„å½•

### 8.1 æœ¯è¯­è¡¨

| æœ¯è¯­     | è‹±æ–‡                        | è¯´æ˜                                   |
| -------- | --------------------------- | -------------------------------------- |
| è¯æ ¹     | Lemma                       | å•è¯çš„åŸå‹å½¢å¼ï¼ˆå¦‚ "running" â†’ "run"ï¼‰ |
| è¯æ€§     | POS (Part of Speech)        | åè¯ã€åŠ¨è¯ã€å½¢å®¹è¯ç­‰                   |
| é—´éš”é‡å¤ | Spaced Repetition           | ç§‘å­¦å¤ä¹ ç®—æ³•                           |
| Anki     | Anki                        | å¼€æºé—´éš”é‡å¤å­¦ä¹ è½¯ä»¶                   |
| SM-2     | SuperMemo 2                 | Anki ä½¿ç”¨çš„ç®—æ³•                        |
| NLP      | Natural Language Processing | è‡ªç„¶è¯­è¨€å¤„ç†                           |
